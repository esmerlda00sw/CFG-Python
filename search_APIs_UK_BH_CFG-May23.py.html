<html>
<head>
<title>search_APIs_UK_BH_CFG-May23.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
search_APIs_UK_BH_CFG-May23.py</font>
</center></td></tr></table>
<pre><span class="s0">#This code allows users to search for UK Bank Holidays for a given Country &amp; Year.</span>
<span class="s0">#import library</span>
<span class="s2">import </span><span class="s1">requests</span>

<span class="s1">url = </span><span class="s3">&quot;https://www.gov.uk/bank-holidays.json&quot;</span>
<span class="s1">countries = [</span><span class="s3">&quot;scotland&quot;</span><span class="s2">, </span><span class="s3">&quot;england-and-wales&quot;</span><span class="s2">, </span><span class="s3">&quot;northern-ireland&quot;</span><span class="s1">]</span>

<span class="s0">#created a function to check the data in the URL and fetch the data for a given country and year. Provide the results.</span>
<span class="s0">#This function has two parameters called country and year which is passed by the user.</span>

<span class="s2">def </span><span class="s1">search_bank_holidays(country</span><span class="s2">, </span><span class="s1">year):</span>
    <span class="s1">response = requests.get(url)  </span><span class="s0"># Send a request to the specified URL</span>
    <span class="s2">if </span><span class="s1">response.ok:  </span><span class="s0"># Check if the request was successful (connected to the URL)</span>
        <span class="s1">data = response.json()  </span><span class="s0"># Fetch the data from the URL in JSON format</span>

        <span class="s1">events = data[country][</span><span class="s3">&quot;events&quot;</span><span class="s1">]  </span><span class="s0"># First it goes into the data, then into the given country &amp; gets the events for that country. Results placed in variable 'events'</span>
        <span class="s0"># The title and date of events are extracted so that they match the provided year</span>
        <span class="s1">data_from_events = [</span><span class="s3">f&quot;</span><span class="s2">{</span><span class="s1">events[</span><span class="s3">'title'</span><span class="s1">]</span><span class="s2">}</span><span class="s3">:</span><span class="s2">{</span><span class="s1">events[</span><span class="s3">'date'</span><span class="s1">]</span><span class="s2">}</span><span class="s3">&quot; </span><span class="s2">for </span><span class="s1">events </span><span class="s2">in </span><span class="s1">events </span><span class="s2">if </span><span class="s1">events[</span><span class="s3">&quot;date&quot;</span><span class="s1">].startswith(year)]</span>

        <span class="s2">if </span><span class="s1">data_from_events:</span>
            <span class="s2">return </span><span class="s3">&quot;Bank Holidays:</span><span class="s2">\n</span><span class="s3">&quot; </span><span class="s1">+ </span><span class="s3">&quot;</span><span class="s2">\n</span><span class="s3">&quot;</span><span class="s1">.join(data_from_events)  </span><span class="s0"># Returns the bank holiday data with paragraph spaces</span>
        <span class="s2">else</span><span class="s1">:</span>
            <span class="s2">return </span><span class="s3">&quot;No Bank Holidays for the given year&quot;  </span><span class="s0"># Returns a message when there are no bank holidays for the given year</span>

<span class="s2">while True</span><span class="s1">:</span>
    <span class="s1">country = input(</span><span class="s3">&quot;Please enter scotland or england-and-wales or northern-ireland): &quot;</span><span class="s1">)  </span><span class="s0"># Ask the user to enter a country</span>
    <span class="s2">if not </span><span class="s1">country:</span>
        <span class="s2">break</span>
    <span class="s2">while </span><span class="s1">country.lower() </span><span class="s2">not in </span><span class="s1">countries:  </span><span class="s0"># check the entered country against the available countries</span>
        <span class="s1">print(</span><span class="s3">&quot;Sorry, wrong country name entered&quot;</span><span class="s1">)</span>
        <span class="s1">country = input(</span><span class="s3">&quot;Please enter scotland or england-and-wales or northern-ireland): &quot;</span><span class="s1">)</span>

        <span class="s2">if not </span><span class="s1">country:</span>
            <span class="s2">break</span>

    <span class="s1">year = input(</span><span class="s3">&quot;Please enter a year (e.g. 2023): &quot;</span><span class="s1">)  </span><span class="s0"># Ask the user to enter a year</span>
    <span class="s2">if not </span><span class="s1">year:</span>
        <span class="s2">break  </span><span class="s0"># Exit the loop if the user wants to quit</span>

    <span class="s1">results = search_bank_holidays(country.lower()</span><span class="s2">, </span><span class="s1">year)  </span><span class="s0"># Call the function with the given country &amp; year</span>
    <span class="s1">print(results)</span>

    <span class="s1">choice = input(</span><span class="s3">&quot;Would you like to perform another search? (yes/no): &quot;</span><span class="s1">)  </span><span class="s0"># Ask the user if they want to continue searching</span>
    <span class="s2">if </span><span class="s1">choice.lower() == </span><span class="s3">&quot;no&quot;</span><span class="s1">:</span>
        <span class="s2">break  </span><span class="s0"># #If it is a no then end the loop/search.</span>
    <span class="s2">elif </span><span class="s1">choice.lower() == </span><span class="s3">&quot;yes&quot;</span><span class="s1">:</span>
        <span class="s2">continue  </span><span class="s0"># Continue the search if the user chooses to do so</span>

<span class="s1">print(</span><span class="s3">&quot;Thank you! from Esmerlda00sw &quot;</span><span class="s1">)  </span><span class="s0"># Display the final message when the program ends</span>
</pre>
</body>
</html>